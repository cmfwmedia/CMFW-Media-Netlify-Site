<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMFW Media Netlify Site</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <main>
        <h1 class="visually-hidden">Heroes examples</h1>

        <div class="px-4 py-5 my-5 text-center">
            <img class="d-block mx-auto mb-4"
                src="https://images.squarespace-cdn.com/content/v1/6424bb54bd8dbd45e169a0a1/0bd039a5-9033-4b7b-bbd8-f9a388aa01c3/logo+no+text.png?format=300w"
                alt="CMFW Media logo">
            <h1 class="display-5 fw-bold text-body-emphasis">CMFW Media, inc.</h1>
            <div class="col-lg-6 mx-auto">
                <p class="lead mb-4">This is the netlify-hosted site for CMFW Media.</p>
                <h3 class="display-5">API endpoint testing</h3>
                <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <!-- <button id="fetch-btn" type="button" class="btn btn-primary btn-lg px-4 gap-3">Call
                        button</button> -->
                    <button id="fetch-api" type="button" class="btn btn-primary btn-lg px-4 gap-3">fetchAPI</button>
                    <button id="fetch-drone" type="button" class="btn btn-primary btn-lg px-4 gap-3">fetch drone</button>
                    <button id="fetch-place" type="button" class="btn btn-primary btn-lg px-4 gap-3">fetch place</button>
                    <button id="fetch-db" type="button" class="btn btn-primary btn-lg px-4 gap-3">fetchDB</button>
                </div>
            </div>
        </div>
        <div id="injection"></div>
        <!-- <div class="container px-4 py-1">
            <div class="row g-4 py-1 row-cols-1 row-cols-lg-3">
                <div class="feature col">
                    <img src="https://images.squarespace-cdn.com/content/65022074520ebd181f024ee1/6e6477ba-2023-4574-8b31-ff234d9cb726/dji+mavic+mini.png?content-type=image%2Fpng"
                        class="img-thumbnail" alt="...">
                    <h3 class="fs-2 text-body-emphasis">CMFW Mavic Air</h3>
                    <h4 class="fs-2 text-body-emphasis">DJI Mavic Mini</h4>
                    <p>Number of Flights: 12</p>
                    <p>Total Flight Time: 12h, 12m, 12s</p>
                    <p>Status: Retired</p>
                    <a href="#" class="icon-link">
                        More
                        <svg class="bi">
                            <use xlink:href="#chevron-right"></use>
                        </svg>
                    </a>
                </div>
                <div class="feature col">
                    <img src="https://images.squarespace-cdn.com/content/65022074520ebd181f024ee1/5f0c541f-df69-43a7-902a-9a338fbeb7de/DJI+Mavic+3E.jpg?content-type=image%2Fjpeg"
                        class="img-thumbnail" alt="...">
                    <h3 class="fs-2 text-body-emphasis">Goose</h3>
                    <h4 class="fs-2 text-body-emphasis">DJI Mavic 3E</h4>
                    <p>Number of Flights: 10</p>
                    <p>Total Flight Time: 12h, 12m, 12s</p>
                    <p>Status: Airworthy</p>
                    <a href="#" class="icon-link">
                        More
                        <svg class="bi">
                            <use xlink:href="#chevron-right"></use>
                        </svg>
                    </a>
                </div>
                <div class="feature col">
                    <img src="https://images.squarespace-cdn.com/content/65022074520ebd181f024ee1/14b3046b-cb01-4793-ad41-dcb5d179d99c/DJI+Air+2S.jpg?content-type=image%2Fjpeg"
                        class="img-thumbnail" alt="...">
                    <h3 class="fs-2 text-body-emphasis">Philip</h3>
                    <h4 class="fs-2 text-body-emphasis">DJI Air 2S</h4>
                    <p>Number of Flights: 176</p>
                    <p>Total Flight Time: 12h, 12m, 12s</p>
                    <p>Status: Airworthy</p>
                    <a href="#" class="icon-link">
                        More
                        <svg class="bi">
                            <use xlink:href="#chevron-right"></use>
                        </svg>
                    </a>
                </div>
            </div>
        </div> -->
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const fetchDb = document.getElementById('fetch-db')
            const fetchDrone = document.getElementById('fetch-drone')
            const fetchPlace = document.getElementById('fetch-place')
            const fetchApi = document.getElementById('fetch-api')
            const SpecificDroneUrl = "https://www.dronelogbook.com/inventory/droneDetail.php?id="

            fetchApi.addEventListener('click', async () => {
                const response = await fetch('/.netlify/functions/getFlights')
                    .then(response => response.json()
                    )
                console.log(response)
            })
            fetchPlace.addEventListener('click', async () => {
                const response = await fetch('/.netlify/functions/getPlaces')
                    .then(response => response.json()
                    )
                console.log(response)
            })
            fetchDrone.addEventListener('click', async () => {
                const response = await fetch('/.netlify/functions/getDrones')
                    .then(response => response.json()
                    )
                console.log(response)
            })

            fetchDb.addEventListener('click', async () => {
                // const response = await fetch('/.netlify/functions/fetchDb')
                //     .then(response => response.json()
                //     )
                // console.log(response)
                try {
                    const response = await fetch('/.netlify/functions/fetchDb')
                        .then(response => response.json());
                    console.log(response)
                    // Check if response.getDrones.data exists and is an array
                    if (response && response.getDrones && Array.isArray(response.getDrones.data)) {
                        const customObjectsArray = [];

                        response.getDrones.data.forEach(drone => {
                            // Extracting properties and creating custom objects
                            const customObject = {
                                name: drone.name,
                                model: drone.model,
                                guid: drone.guid,
                                brand: drone.brand,
                                status: drone.status,
                                // Add more properties as needed (flight_time, number_of_flights, image_url)
                            };

                            // Push the custom object into the custom array
                            customObjectsArray.push(customObject);
                        });

                        // Logging the custom array of objects
                        console.log(customObjectsArray);

                        // Call a function to generate HTML elements using this custom array
                        // generateHTMLElements(customObjectsArray);
                    } else {
                        console.log('Invalid data format or missing data in the response');
                    }
                } catch (error) {
                    console.error('Error fetching data:', error);
                }
            });
        })
    </script>
</body>

</html>